import{N as e,u as t,p as a,s as l,K as o,r as s,q as r,g as u,o as i,c as n,b as d,i as p,d as c,y as m,z as b,A as x}from"./index-39e033da.js";import{_ as f,a as h}from"./TextareaText-e475e2f0.js";import{_ as v,c as g}from"./books-1fbb7980.js";import"./lodash-0862ab66.js";const y={class:"mx-auto max-w-xl p-4"},k={class:"flex flex-col gap-4"},V={class:"mt-4 flex items-center justify-evenly gap-4"},j=["disabled"],w={__name:"BookCreate",setup(w){const B=e(),T=t(),I=a(),{isAlert:_}=l(I),q=o({title:"",author:"",description:""}),C=s({title:!1,author:!1,description:!0}),E=s({}),O=e=>{Object.assign(C.value,e)},U=r((()=>{const{title:e,author:t}=q;return Object.values({title:e,author:t}).some((e=>""===e.trim()))})),A=r((()=>Object.values(C.value).every((e=>e)))),D=()=>{var e;A.value&&(_.value=!0,E.value={alertTitle:"確認新增 ?",confirmTodo:(e=q,async()=>{try{const{data:t}=await g(e);x({group:"success",title:"新增成功"}),B.push({name:"BookDetail",params:{bookId:t.id}})}catch(t){}})})},L=()=>{_.value=!0,E.value={alertTitle:"是否返回上一頁 ?",confirmTodo(){B.push({name:"BooksList"})}}};return u((()=>{T.$patch((e=>{e.backRoute={name:"BooksList"}}))})),(e,t)=>(i(),n("div",y,[d("div",k,[p(f,{modelValue:q.title,"onUpdate:modelValue":t[0]||(t[0]=e=>q.title=e),focus:!0,"input-title":"名稱","input-name":"title","placeholder-text":"請輸入書名","required-text":"請填寫書名",onErrorsInfo:O},null,8,["modelValue"]),p(f,{modelValue:q.author,"onUpdate:modelValue":t[1]||(t[1]=e=>q.author=e),"input-title":"作者","input-name":"author","placeholder-text":"請輸入作者","required-text":"請填寫作者",onErrorsInfo:O},null,8,["modelValue"]),p(h,{modelValue:q.description,"onUpdate:modelValue":t[2]||(t[2]=e=>q.description=e),"input-name":"description","max-length":"500",onErrorsInfo:O},null,8,["modelValue"]),d("div",V,[d("button",{type:"button",class:"block w-full max-w-[192px] rounded-full bg-gray-300 p-2 px-4 text-white hover:bg-gray-400",onClick:L}," 取消 "),d("button",{type:"button",disabled:c(U),class:"block w-full max-w-[192px] rounded-full bg-myBlue p-2 px-4 text-white hover:bg-myDarkBlue disabled:bg-gray-300",onClick:D}," 新增 ",8,j)])]),p(v,m(b(E.value)),null,16)]))}};export{w as default};
